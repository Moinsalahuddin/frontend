{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\TECH FEVER\\\\Desktop\\\\Zainab\\\\LuxuryStay Hospitality\\\\LuxuryStay Hospitality\\\\frontend\\\\src\\\\components\\\\Chat.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useContext } from 'react';\nimport axios from 'axios';\nimport { AuthContext } from '../context/AuthContext.jsx';\nimport './Chat.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Chat = ({\n  isOpen,\n  onClose\n}) => {\n  _s();\n  var _selectedConversation2, _selectedConversation3, _selectedConversation4, _selectedConversation5, _selectedConversation6, _selectedConversation7, _selectedConversation8;\n  const {\n    user\n  } = useContext(AuthContext);\n  const [conversations, setConversations] = useState([]);\n  const [selectedConversation, setSelectedConversation] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [availableUsers, setAvailableUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [sending, setSending] = useState(false);\n  const messagesEndRef = useRef(null);\n  const messagesContainerRef = useRef(null);\n  useEffect(() => {\n    if (isOpen && user) {\n      fetchConversations();\n      fetchAvailableUsers();\n    }\n  }, [isOpen, user]);\n  useEffect(() => {\n    if (selectedConversation) {\n      fetchMessages(selectedConversation._id);\n      // Poll for new messages every 3 seconds\n      const interval = setInterval(() => {\n        fetchMessages(selectedConversation._id);\n      }, 3000);\n      return () => clearInterval(interval);\n    }\n  }, [selectedConversation]);\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  const fetchConversations = async () => {\n    try {\n      const response = await axios.get('/api/messages/conversations');\n      setConversations(response.data.conversations || []);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error fetching conversations:', error);\n      setLoading(false);\n    }\n  };\n  const fetchAvailableUsers = async () => {\n    try {\n      const response = await axios.get('/api/messages/users');\n      setAvailableUsers(response.data.users || []);\n    } catch (error) {\n      console.error('Error fetching available users:', error);\n    }\n  };\n  const fetchMessages = async conversationId => {\n    try {\n      const response = await axios.get(`/api/messages/${conversationId}`);\n      setMessages(response.data.messages || []);\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n    }\n  };\n  const startConversation = async userId => {\n    try {\n      const response = await axios.get(`/api/messages/conversation/${userId}`);\n      const conversation = response.data.conversation;\n      setSelectedConversation({\n        ...conversation,\n        otherParticipant: conversation.participants.find(p => p._id !== user._id)\n      });\n      fetchMessages(conversation._id);\n    } catch (error) {\n      console.error('Error starting conversation:', error);\n      alert('Error starting conversation');\n    }\n  };\n  const sendMessage = async e => {\n    e.preventDefault();\n    if (!newMessage.trim() || sending) return;\n    setSending(true);\n    try {\n      var _selectedConversation;\n      const response = await axios.post('/api/messages', {\n        conversationId: selectedConversation === null || selectedConversation === void 0 ? void 0 : selectedConversation._id,\n        receiverId: selectedConversation === null || selectedConversation === void 0 ? void 0 : (_selectedConversation = selectedConversation.otherParticipant) === null || _selectedConversation === void 0 ? void 0 : _selectedConversation._id,\n        message: newMessage\n      });\n      setMessages(prev => [...prev, response.data.message]);\n      setNewMessage('');\n      fetchConversations(); // Refresh conversations list\n    } catch (error) {\n      console.error('Error sending message:', error);\n      alert('Error sending message');\n    } finally {\n      setSending(false);\n    }\n  };\n  const formatTime = date => {\n    const messageDate = new Date(date);\n    const now = new Date();\n    const diff = now - messageDate;\n    const minutes = Math.floor(diff / 60000);\n    if (minutes < 1) return 'Just now';\n    if (minutes < 60) return `${minutes}m ago`;\n    if (minutes < 1440) return `${Math.floor(minutes / 60)}h ago`;\n    return messageDate.toLocaleDateString();\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-overlay\",\n    onClick: onClose,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-container\",\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Messages\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"chat-close-btn\",\n          onClick: onClose,\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-sidebar\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-sidebar-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Conversations\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary btn-sm\",\n              onClick: () => setSelectedConversation(null),\n              children: \"New Chat\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this), !selectedConversation ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-users-list\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              children: \"Start a conversation:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 17\n            }, this), availableUsers.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"chat-empty\",\n              children: \"No users available to chat\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 19\n            }, this) : availableUsers.map(userItem => {\n              var _userItem$firstName, _userItem$lastName;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"chat-user-item\",\n                onClick: () => startConversation(userItem._id),\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"chat-user-avatar\",\n                  children: [(_userItem$firstName = userItem.firstName) === null || _userItem$firstName === void 0 ? void 0 : _userItem$firstName[0], (_userItem$lastName = userItem.lastName) === null || _userItem$lastName === void 0 ? void 0 : _userItem$lastName[0]]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"chat-user-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"chat-user-name\",\n                    children: [userItem.firstName, \" \", userItem.lastName]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 164,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"chat-user-role\",\n                    children: userItem.role\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 23\n                }, this)]\n              }, userItem._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 21\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-conversations-list\",\n            children: conversations.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"chat-empty\",\n              children: \"No conversations yet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 19\n            }, this) : conversations.map(conv => {\n              var _otherUser$firstName, _otherUser$lastName;\n              const otherUser = conv.otherParticipant || conv.participants.find(p => p._id !== user._id);\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `chat-conversation-item ${(selectedConversation === null || selectedConversation === void 0 ? void 0 : selectedConversation._id) === conv._id ? 'active' : ''}`,\n                onClick: () => {\n                  setSelectedConversation({\n                    ...conv,\n                    otherParticipant: otherUser\n                  });\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"chat-user-avatar\",\n                  children: [otherUser === null || otherUser === void 0 ? void 0 : (_otherUser$firstName = otherUser.firstName) === null || _otherUser$firstName === void 0 ? void 0 : _otherUser$firstName[0], otherUser === null || otherUser === void 0 ? void 0 : (_otherUser$lastName = otherUser.lastName) === null || _otherUser$lastName === void 0 ? void 0 : _otherUser$lastName[0]]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"chat-conversation-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"chat-conversation-header\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"chat-conversation-name\",\n                      children: [otherUser === null || otherUser === void 0 ? void 0 : otherUser.firstName, \" \", otherUser === null || otherUser === void 0 ? void 0 : otherUser.lastName]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 200,\n                      columnNumber: 29\n                    }, this), conv.unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"chat-unread-badge\",\n                      children: conv.unreadCount\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 204,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 199,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"chat-conversation-preview\",\n                    children: conv.lastMessage || 'No messages yet'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 25\n                }, this)]\n              }, conv._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-messages-area\",\n          children: selectedConversation ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-messages-header\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"chat-messages-user\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"chat-user-avatar\",\n                  children: [(_selectedConversation2 = selectedConversation.otherParticipant) === null || _selectedConversation2 === void 0 ? void 0 : (_selectedConversation3 = _selectedConversation2.firstName) === null || _selectedConversation3 === void 0 ? void 0 : _selectedConversation3[0], (_selectedConversation4 = selectedConversation.otherParticipant) === null || _selectedConversation4 === void 0 ? void 0 : (_selectedConversation5 = _selectedConversation4.lastName) === null || _selectedConversation5 === void 0 ? void 0 : _selectedConversation5[0]]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"chat-messages-name\",\n                    children: [(_selectedConversation6 = selectedConversation.otherParticipant) === null || _selectedConversation6 === void 0 ? void 0 : _selectedConversation6.firstName, ' ', (_selectedConversation7 = selectedConversation.otherParticipant) === null || _selectedConversation7 === void 0 ? void 0 : _selectedConversation7.lastName]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 230,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"chat-messages-role\",\n                    children: (_selectedConversation8 = selectedConversation.otherParticipant) === null || _selectedConversation8 === void 0 ? void 0 : _selectedConversation8.role\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-messages-list\",\n              ref: messagesContainerRef,\n              children: [messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"chat-empty-messages\",\n                children: \"No messages yet. Start the conversation!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 21\n              }, this) : messages.map(message => {\n                const isOwn = message.senderId._id === user._id;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `chat-message ${isOwn ? 'own' : 'other'}`,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"chat-message-content\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"chat-message-text\",\n                      children: message.message\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 255,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"chat-message-time\",\n                      children: formatTime(message.createdAt)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 256,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 254,\n                    columnNumber: 27\n                  }, this)\n                }, message._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 25\n                }, this);\n              }), /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: messagesEndRef\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              className: \"chat-input-form\",\n              onSubmit: sendMessage,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"chat-input\",\n                placeholder: \"Type a message...\",\n                value: newMessage,\n                onChange: e => setNewMessage(e.target.value),\n                disabled: sending\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"chat-send-btn\",\n                disabled: !newMessage.trim() || sending,\n                children: \"Send\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-welcome\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-welcome-icon\",\n              children: \"\\uD83D\\uDCAC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Select a conversation or start a new one\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Choose from the list to view messages\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 5\n  }, this);\n};\n_s(Chat, \"AIiLnTq3bRsSlqglS0YHGjK73Mk=\");\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useContext","axios","AuthContext","jsxDEV","_jsxDEV","Fragment","_Fragment","Chat","isOpen","onClose","_s","_selectedConversation2","_selectedConversation3","_selectedConversation4","_selectedConversation5","_selectedConversation6","_selectedConversation7","_selectedConversation8","user","conversations","setConversations","selectedConversation","setSelectedConversation","messages","setMessages","newMessage","setNewMessage","availableUsers","setAvailableUsers","loading","setLoading","sending","setSending","messagesEndRef","messagesContainerRef","fetchConversations","fetchAvailableUsers","fetchMessages","_id","interval","setInterval","clearInterval","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","response","get","data","error","console","users","conversationId","startConversation","userId","conversation","otherParticipant","participants","find","p","alert","sendMessage","e","preventDefault","trim","_selectedConversation","post","receiverId","message","prev","formatTime","date","messageDate","Date","now","diff","minutes","Math","floor","toLocaleDateString","className","onClick","children","stopPropagation","fileName","_jsxFileName","lineNumber","columnNumber","length","map","userItem","_userItem$firstName","_userItem$lastName","firstName","lastName","role","conv","_otherUser$firstName","_otherUser$lastName","otherUser","unreadCount","lastMessage","ref","isOwn","senderId","createdAt","onSubmit","type","placeholder","value","onChange","target","disabled","_c","$RefreshReg$"],"sources":["C:/Users/TECH FEVER/Desktop/Zainab/LuxuryStay Hospitality/LuxuryStay Hospitality/frontend/src/components/Chat.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useContext } from 'react';\r\nimport axios from 'axios';\r\nimport { AuthContext } from '../context/AuthContext.jsx';\r\nimport './Chat.css';\r\n\r\nconst Chat = ({ isOpen, onClose }) => {\r\n  const { user } = useContext(AuthContext);\r\n  const [conversations, setConversations] = useState([]);\r\n  const [selectedConversation, setSelectedConversation] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [availableUsers, setAvailableUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [sending, setSending] = useState(false);\r\n  const messagesEndRef = useRef(null);\r\n  const messagesContainerRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && user) {\r\n      fetchConversations();\r\n      fetchAvailableUsers();\r\n    }\r\n  }, [isOpen, user]);\r\n\r\n  useEffect(() => {\r\n    if (selectedConversation) {\r\n      fetchMessages(selectedConversation._id);\r\n      // Poll for new messages every 3 seconds\r\n      const interval = setInterval(() => {\r\n        fetchMessages(selectedConversation._id);\r\n      }, 3000);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [selectedConversation]);\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  const fetchConversations = async () => {\r\n    try {\r\n      const response = await axios.get('/api/messages/conversations');\r\n      setConversations(response.data.conversations || []);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('Error fetching conversations:', error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchAvailableUsers = async () => {\r\n    try {\r\n      const response = await axios.get('/api/messages/users');\r\n      setAvailableUsers(response.data.users || []);\r\n    } catch (error) {\r\n      console.error('Error fetching available users:', error);\r\n    }\r\n  };\r\n\r\n  const fetchMessages = async (conversationId) => {\r\n    try {\r\n      const response = await axios.get(`/api/messages/${conversationId}`);\r\n      setMessages(response.data.messages || []);\r\n    } catch (error) {\r\n      console.error('Error fetching messages:', error);\r\n    }\r\n  };\r\n\r\n  const startConversation = async (userId) => {\r\n    try {\r\n      const response = await axios.get(`/api/messages/conversation/${userId}`);\r\n      const conversation = response.data.conversation;\r\n      setSelectedConversation({\r\n        ...conversation,\r\n        otherParticipant: conversation.participants.find(\r\n          p => p._id !== user._id\r\n        )\r\n      });\r\n      fetchMessages(conversation._id);\r\n    } catch (error) {\r\n      console.error('Error starting conversation:', error);\r\n      alert('Error starting conversation');\r\n    }\r\n  };\r\n\r\n  const sendMessage = async (e) => {\r\n    e.preventDefault();\r\n    if (!newMessage.trim() || sending) return;\r\n\r\n    setSending(true);\r\n    try {\r\n      const response = await axios.post('/api/messages', {\r\n        conversationId: selectedConversation?._id,\r\n        receiverId: selectedConversation?.otherParticipant?._id,\r\n        message: newMessage\r\n      });\r\n\r\n      setMessages(prev => [...prev, response.data.message]);\r\n      setNewMessage('');\r\n      fetchConversations(); // Refresh conversations list\r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n      alert('Error sending message');\r\n    } finally {\r\n      setSending(false);\r\n    }\r\n  };\r\n\r\n  const formatTime = (date) => {\r\n    const messageDate = new Date(date);\r\n    const now = new Date();\r\n    const diff = now - messageDate;\r\n    const minutes = Math.floor(diff / 60000);\r\n\r\n    if (minutes < 1) return 'Just now';\r\n    if (minutes < 60) return `${minutes}m ago`;\r\n    if (minutes < 1440) return `${Math.floor(minutes / 60)}h ago`;\r\n    return messageDate.toLocaleDateString();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"chat-overlay\" onClick={onClose}>\r\n      <div className=\"chat-container\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"chat-header\">\r\n          <h3>Messages</h3>\r\n          <button className=\"chat-close-btn\" onClick={onClose}>Ã—</button>\r\n        </div>\r\n\r\n        <div className=\"chat-content\">\r\n          {/* Conversations List */}\r\n          <div className=\"chat-sidebar\">\r\n            <div className=\"chat-sidebar-header\">\r\n              <h4>Conversations</h4>\r\n              <button\r\n                className=\"btn btn-primary btn-sm\"\r\n                onClick={() => setSelectedConversation(null)}\r\n              >\r\n                New Chat\r\n              </button>\r\n            </div>\r\n\r\n            {!selectedConversation ? (\r\n              <div className=\"chat-users-list\">\r\n                <h5>Start a conversation:</h5>\r\n                {availableUsers.length === 0 ? (\r\n                  <p className=\"chat-empty\">No users available to chat</p>\r\n                ) : (\r\n                  availableUsers.map(userItem => (\r\n                    <div\r\n                      key={userItem._id}\r\n                      className=\"chat-user-item\"\r\n                      onClick={() => startConversation(userItem._id)}\r\n                    >\r\n                      <div className=\"chat-user-avatar\">\r\n                        {userItem.firstName?.[0]}{userItem.lastName?.[0]}\r\n                      </div>\r\n                      <div className=\"chat-user-info\">\r\n                        <div className=\"chat-user-name\">\r\n                          {userItem.firstName} {userItem.lastName}\r\n                        </div>\r\n                        <div className=\"chat-user-role\">{userItem.role}</div>\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <div className=\"chat-conversations-list\">\r\n                {conversations.length === 0 ? (\r\n                  <p className=\"chat-empty\">No conversations yet</p>\r\n                ) : (\r\n                  conversations.map(conv => {\r\n                    const otherUser = conv.otherParticipant || conv.participants.find(\r\n                      p => p._id !== user._id\r\n                    );\r\n                    return (\r\n                      <div\r\n                        key={conv._id}\r\n                        className={`chat-conversation-item ${\r\n                          selectedConversation?._id === conv._id ? 'active' : ''\r\n                        }`}\r\n                        onClick={() => {\r\n                          setSelectedConversation({\r\n                            ...conv,\r\n                            otherParticipant: otherUser\r\n                          });\r\n                        }}\r\n                      >\r\n                        <div className=\"chat-user-avatar\">\r\n                          {otherUser?.firstName?.[0]}{otherUser?.lastName?.[0]}\r\n                        </div>\r\n                        <div className=\"chat-conversation-info\">\r\n                          <div className=\"chat-conversation-header\">\r\n                            <span className=\"chat-conversation-name\">\r\n                              {otherUser?.firstName} {otherUser?.lastName}\r\n                            </span>\r\n                            {conv.unreadCount > 0 && (\r\n                              <span className=\"chat-unread-badge\">{conv.unreadCount}</span>\r\n                            )}\r\n                          </div>\r\n                          <div className=\"chat-conversation-preview\">\r\n                            {conv.lastMessage || 'No messages yet'}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Messages Area */}\r\n          <div className=\"chat-messages-area\">\r\n            {selectedConversation ? (\r\n              <>\r\n                <div className=\"chat-messages-header\">\r\n                  <div className=\"chat-messages-user\">\r\n                    <div className=\"chat-user-avatar\">\r\n                      {selectedConversation.otherParticipant?.firstName?.[0]}\r\n                      {selectedConversation.otherParticipant?.lastName?.[0]}\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"chat-messages-name\">\r\n                        {selectedConversation.otherParticipant?.firstName}{' '}\r\n                        {selectedConversation.otherParticipant?.lastName}\r\n                      </div>\r\n                      <div className=\"chat-messages-role\">\r\n                        {selectedConversation.otherParticipant?.role}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"chat-messages-list\" ref={messagesContainerRef}>\r\n                  {messages.length === 0 ? (\r\n                    <div className=\"chat-empty-messages\">\r\n                      No messages yet. Start the conversation!\r\n                    </div>\r\n                  ) : (\r\n                    messages.map(message => {\r\n                      const isOwn = message.senderId._id === user._id;\r\n                      return (\r\n                        <div\r\n                          key={message._id}\r\n                          className={`chat-message ${isOwn ? 'own' : 'other'}`}\r\n                        >\r\n                          <div className=\"chat-message-content\">\r\n                            <div className=\"chat-message-text\">{message.message}</div>\r\n                            <div className=\"chat-message-time\">\r\n                              {formatTime(message.createdAt)}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })\r\n                  )}\r\n                  <div ref={messagesEndRef} />\r\n                </div>\r\n\r\n                <form className=\"chat-input-form\" onSubmit={sendMessage}>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"chat-input\"\r\n                    placeholder=\"Type a message...\"\r\n                    value={newMessage}\r\n                    onChange={(e) => setNewMessage(e.target.value)}\r\n                    disabled={sending}\r\n                  />\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"chat-send-btn\"\r\n                    disabled={!newMessage.trim() || sending}\r\n                  >\r\n                    Send\r\n                  </button>\r\n                </form>\r\n              </>\r\n            ) : (\r\n              <div className=\"chat-welcome\">\r\n                <div className=\"chat-welcome-icon\">ðŸ’¬</div>\r\n                <h3>Select a conversation or start a new one</h3>\r\n                <p>Choose from the list to view messages</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}